# W25Q128学习笔记

## 1. 介绍
### 1.1 硬件接口与连接
W25Q128的各个引脚的功能描述如下：

|引脚|功能|
|---|---|
|VCC|电源引脚，3.3V|
|GND|地线引脚，接地|
|CS|片选引脚，片选信号，低电平有效|
|SO|片选输出，片选信号的输出端|
|SI|数据输入，数据输入端|
|SCK|时钟信号，时钟信号端|
|WP|写保护信号，写保护端|
|HOLD|保持信号，保持信号端|

**W25Q128支持SPI模式0和模式3。在MCU与W25Q128通信时，设置使用SPI1模式3，即设置CPOL = 1,CPOA = 1。**

### 1.2 存储空间发布
    W25Q128总容量为16MB，使用24位地址线，地址范围为0x000000~0xFFFFFF。
    16MB分为256个块（Block），每个块的大小为64KB，16位偏移地址，快内偏移地址范围是0x0000~0XFFFF。
    每个块又分为16个扇区（Sector），共4096个扇区，每个扇区的大小为4KB，12位偏移地址，扇区内偏移地址的范围是0x000~0xFFF。
    每个扇区又分为16个页（Page）,共65536个页，每个页的大小为256个字节，8位偏移地址，页内偏移地址范围是0x00~0xFF。
[![pEJiRxO.png](https://s21.ax1x.com/2025/03/04/pEJiRxO.png)](https://imgse.com/i/pEJiRxO)

### 1.3 读写原则
    从W25Q128读取数据时，用户可以从任意地址开始读取任意长度的数据。
    从W25Q128写数据时，用户可以从任意地址开始写数据，但是一次SPI通信写入的数据范围不能超过一个页的边界。所以，如果从页的起始地址开始写数据，一次最多可写入一个页的数据，即256个字节。如果一次写入的数据超过页的边界，会再从页的起始位置开始写。向存储区域写入数据时，存储区域必须是被擦除过的，也就是存储内容是0xFF，否则写入的数据操作无效。用户可以对整个器件、某个块、某个扇区进行擦除操作，但是不能对单个页进行擦除。


